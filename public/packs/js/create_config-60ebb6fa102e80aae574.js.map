{"version":3,"file":"js/create_config-60ebb6fa102e80aae574.js","sources":["webpack://ontrack/./app/javascript/components/expenses/CreateConfig.jsx","webpack://ontrack/./app/javascript/components/expenses/GenericList.jsx","webpack://ontrack/./app/javascript/components/expenses/GenericListItem.jsx","webpack://ontrack/./app/javascript/components/shared/FieldErrors.jsx","webpack://ontrack/./app/javascript/packs/create_config.jsx"],"sourcesContent":["import React from 'react';\r\nimport FieldErrors from '../shared/FieldErrors';\r\nimport GenericList from './GenericList';\r\nimport { useRef } from 'react';\r\n\r\nclass CreateConfig extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      descriptionIdx: 0,\r\n      categoryIdx: 0,\r\n      amountIdx: 0,\r\n      dateIdx: 0,\r\n      ignoredSubstring: [],\r\n      currentSubstring: \"\",\r\n    };\r\n\r\n  }\r\n\r\n  handleRemoveSubstring() {\r\n    this.setState(({ ignoredSubstring: this.state.ignoredSubstring.filter(e => e !== this.state.currentSubstring) }));\r\n  }\r\n\r\n  handleAddSubstring = () => {\r\n\r\n    console.log(this.state.ignoredSubstring);\r\n    this.setState(prevState =>\r\n    ({\r\n      ignoredSubstring: [...prevState.ignoredSubstring\r\n        .filter(e => e !== this.state.currentSubstring), ...this.state.currentSubstring].sort()\r\n    }));\r\n    this.setState({ currentSubstring: \"\" });\r\n  }\r\n\r\n  handleDescriptionIdxChange = (e) => { this.setState({ descriptionIdx: e.target.value }); }\r\n  handleCategoryIdxChange = (e) => { this.setState({ categoryIdx: e.target.value }); }\r\n  handleAmountIdxChange = (e) => { this.setState({ amountIdx: e.target.value }); }\r\n  handleDateIdxChange = (e) => { this.setState({ dateIdx: e.target.value }); }\r\n\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n\r\n      <form id=\"config-form\" onSubmit={this.handleSubmit}>\r\n\r\n        <div className=\"config-description-container config-group\">\r\n          <div className=\"input-group config-idx\">\r\n            <label className=\"required\">Description index</label>\r\n            <input className=\"config-input config-idx-input\" type=\"number\" min=\"0\"\r\n              value={this.state.descriptionIdx}\r\n              onChange={this.handleDescriptionIdxChange} />\r\n          </div>\r\n          <div className='config-list-input-container'>\r\n            <div className='config-list-input'>\r\n              <label>Ignored substrings in descriptions</label>\r\n              <input className='config-input' onChange={(e) =>\r\n                this.setState({ currentSubstring: e.target.value })} value={this.state.currentSubstring} type=\"text\" />\r\n              <button onClick={this.handleAddSubstring}>+</button>\r\n            </div>\r\n            <div className='config-list'>\r\n              {this.state.ignoredSubstring.length > 0 && <GenericList list={this.state.ignoredSubstring} />}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"config-category-container config-group\">\r\n          <div className=\"input-group config-idx\">\r\n            <label className=\"required\">Category index</label>\r\n            <input className=\"config-input config-idx-input\" type=\"number\" min=\"0\"\r\n              value={this.state.categoryIdx}\r\n              onChange={this.handleCategoryIdxChange} />\r\n          </div>\r\n        </div>\r\n\r\n        <div className='config-amount-container config-group'>\r\n          <div className=\"input-group config-idx\">\r\n            <label className=\"required\">Amount index</label>\r\n            <input className=\"config-input config-idx-input\" type=\"number\" min=\"0\"\r\n              value={this.state.amountIdx}\r\n              onChange={this.handleAmountIdxChange} />\r\n          </div>\r\n        </div>\r\n\r\n\r\n        <div className='config-date-container config-group'>\r\n          <div className=\"input-group config-idx\">\r\n            <label className=\"required\">Date index</label>\r\n            <input className=\"config-input config-idx-input\" type=\"number\" min=\"0\"\r\n              value={this.state.dateIdx}\r\n              onChange={this.handleDateIdxChange} />\r\n          </div>\r\n        </div>\r\n\r\n\r\n      </form>\r\n    );\r\n  }\r\n}\r\n\r\nexport default CreateConfig;\r\n","import React from 'react';\nimport GenericListItem from './GenericListItem';\n\nclass GenericList extends React.Component {\n    constructor(props) {\n        super(props);\n    }\n\n    render() {\n        return (\n            <>\n                {this.props.list.map((item,index) => {\n                    return (\n                        <GenericListItem text={item} />\n                    )\n                })}\n            </>\n        );\n    }\n}\n\nexport default GenericList;","import React from 'react';\n\nclass GenericListItem extends React.Component {\n    constructor(props) {\n        super(props);\n\n    }\n\n    render() {\n        return (\n            <>\n            {this.props.text}\n            </>\n        );\n    }\n}\n\nexport default GenericListItem;","import React from 'react';\nimport PropTypes from 'prop-types';\n\nclass FieldErrors extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = { errors: [] };\n  }\n\n  componentDidMount() {\n    this.buildErrorMessages();\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.show != prevProps.show) { this.buildErrorMessages(); }\n    if (this.props.val != prevProps.val) { this.buildErrorMessages(); }\n    if (JSON.stringify(this.props.validations) != JSON.stringify(prevProps.validations)) { this.buildErrorMessages(); }\n  }\n\n  valRequired() {\n    const val = this.props.val;\n    if (typeof val == 'number') {\n      if (val == undefined || val == null || isNaN(parseInt(val.toString()))) { return false; }\n    } else if (!val) {\n      return false;\n    }\n\n    return true;\n  }\n\n  valGreaterThan() {\n    const val = this.props.val;\n    if (parseFloat(val.toString()) <= this.props.validations.greaterThan) { return false; }\n    return true;\n  }\n\n  buildErrorMessages() {\n    const errs = [];\n\n    if (this.props.validations.required && !this.valRequired()) { errs.push(`${this.props.label} is required`); }\n    if (this.props.validations.greaterThan != undefined && !this.valGreaterThan()) { errs.push(`${this.props.label} must be greater than ${this.props.validations.greaterThan}`); }\n\n    this.setState({ errors: errs });\n    if (this.props.handleErrors) { this.props.handleErrors(this.props.label, errs); }\n  }\n\n  renderError(e, idx) {\n    return <li key={idx}>{e}</li>;\n  }\n\n  render() {\n    if (!this.props.show || !this.state.errors.length) { return ''; }\n\n    return (\n      <ul className=\"errors\">\n        {this.state.errors.map((e, idx) => this.renderError(e, idx))}\n      </ul>\n    );\n  }\n}\n\nFieldErrors.defaultProps = {\n  val: null,\n  validations: {},\n  show: false,\n  handleErrors: null,\n  label: '',\n};\n\nFieldErrors.propTypes = {\n  val: PropTypes.any,\n  validations: PropTypes.object,\n  show: PropTypes.bool,\n  handleErrors: PropTypes.func,\n  label: PropTypes.string,\n};\n\nexport default FieldErrors;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport CreateConfig from '../components/expenses/CreateConfig';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(\n    <CreateConfig/>,\n    document.getElementById('create_config'),\n  );\n});\n"],"mappings":"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","sourceRoot":""}