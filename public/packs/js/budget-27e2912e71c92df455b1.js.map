{"version":3,"file":"js/budget-27e2912e71c92df455b1.js","sources":["webpack://ontrack/./app/javascript/components/budget/AddBudgetModal.jsx","webpack://ontrack/./app/javascript/components/budget/Main.jsx","webpack://ontrack/./app/javascript/components/shared/FieldErrors.jsx","webpack://ontrack/./app/javascript/components/shared/Modal.jsx","webpack://ontrack/./app/javascript/packs/budget.jsx"],"sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Modal from '../shared/Modal';\r\nimport FieldErrors from '../shared/FieldErrors';\r\n\r\nclass AddBudgetModal extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n    \r\n        this.state = {\r\n          name: '',\r\n          errors: {},\r\n          submitted: false,\r\n        };\r\n      }\r\n\r\n  handleNameChange = (e) => { this.setState({ name: e.target.value }); }\r\n  handleErrors = (key, errs) => { this.setState({ errors: Object.assign(this.state.errors, { [key]: errs }) }); }\r\n  handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    this.setState({ submitted: true });\r\n  }\r\n\r\n  renderForm() {\r\n    return (\r\n      <form onSubmit={this.handleSubmit}>\r\n        <div className=\"input-group\">\r\n          <label className=\"required\">Name</label>\r\n          <input type=\"text\" value={this.state.name} onChange={this.handleNameChange} />\r\n          <FieldErrors\r\n            label=\"Name\"\r\n            val={this.state.description}\r\n            validations={{ required: true }}\r\n            show={this.state.submitted} handleErrors={this.handleErrors}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"form-actions\">\r\n          <button type=\"submit\" className=\"btn btn-dark\">Create</button>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Modal title=\"Create Budget\" onClose={this.props.onClose}>\r\n        {this.renderForm()}\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n\r\nAddBudgetModal.propTypes = {\r\n  onClose: PropTypes.func.isRequired,\r\n  //onSave: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default AddBudgetModal;\r\n","import React from 'react'\r\nimport AddBudgetModal from '../budget/AddBudgetModal';\r\n\r\nclass Main extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            //Mocking the data \r\n            budgets: [\r\n                {\r\n                    id: 1, name: 'Perso', users: [\r\n                        { id: 1, firstname: 'Laurent', lastname: 'Brochu' },\r\n                    ]\r\n                },\r\n                {\r\n                    id: 2, name: 'Famille', users: [\r\n                        { id: 2, firstname: 'Laurent', lastname: 'Brochu' },\r\n                        { id: 3, firstname: 'Maxime', lastname: 'Lefebvre' },\r\n                        { id: 4, firstname: 'Karl', lastname: 'Mainville' },\r\n                        { id: 5, firstname: 'Louis', lastname: 'Garceau' }\r\n                    ]\r\n                },\r\n                {\r\n                    id: 3, name: 'Entreprise Planto', users: [\r\n                        { id: 6, firstname: 'Laurent', lastname: 'Brochu' },\r\n                        { id: 7, firstname: 'Maxime', lastname: 'Aubin' },\r\n                        { id: 8, firstname: 'Jean-Philippe', lastname: 'Belval' }\r\n                    ]\r\n                }\r\n            ],\r\n            idSelectedBudget: 0,\r\n            showBudgetCreate: false,\r\n        };\r\n    }\r\n\r\n    openBudgetCreate = () => { this.setState({ showBudgetCreate: true }); }\r\n    closeBudgetCreate = () => { this.setState({ showBudgetCreate: false }); }\r\n    changeSelectedBudget = async (id) => { this.setState({ idSelectedBudget: id }) }\r\n\r\n    renderBudgetCreateModal() {\r\n        if (!this.state.showBudgetCreate) { return ''; }\r\n        //return <AddBudgetModal onClose={this.closeBudgetCreate} onSave={this.onBudgetSave} />;\r\n        return <AddBudgetModal onClose={this.closeBudgetCreate} />;\r\n    }\r\n\r\n\r\n    renderBudgetUsers(user) {\r\n        return (\r\n            <tr key={user.id}>\r\n                <td className=\"input-group\">\r\n                    <label className=\"bg-gray-slight-contrast\">{user.firstname + \" \" + user.lastname}</label>\r\n                </td>\r\n\r\n                <td className=\"input-group mw-150\">\r\n\r\n                    {/*À revoir lors de l'implémentation des rôles */}\r\n\r\n                    {/* <select defaultValue={user.category_id} onChange={(e) => this.updateExpense(expense.id, { category_id: e.target.value })} className=\"bg-gray-slight-contrast\">\r\n                        {this.props.categories.map((c) => <option key={c.id} value={c.id}>{c.name}</option>)}\r\n                    </select> */}\r\n                    <select></select>\r\n                </td>\r\n\r\n                <td>\r\n                    <a onClick={() => this.handleUserRemove(user.id, this.state.budgetId)} className=\"dim-til-hover\"><i className=\"fa fa-times\" /></a>\r\n                </td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    renderBudgetInfo(budget) {\r\n        if (this.state.idSelectedBudget === 0) { return 'Select a budget'; }\r\n        return (\r\n            <div className=\"content\">\r\n                <div className=\"overflow-x bg-gray p-10\">\r\n                    <table className=\"table\">\r\n                        <thead>\r\n                            <tr>\r\n                                <th>Name</th>\r\n                                <th>Role</th>\r\n                                <th />\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody>\r\n                            {budget.users.map((user) => this.renderBudgetUsers(user))}\r\n                        </tbody>\r\n                    </table>\r\n                </div>\r\n                <br/>\r\n                <div>\r\n                    <button className='btn btn-round btn-accept pos-abs mt-neg-20 z-5'>Select</button>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n    renderBudgets() {\r\n\r\n        return (\r\n            <div className='content-with-sidebar mt-30'>\r\n                <div className='sidebar'>\r\n                    <h3 className=''>Your budgets</h3>\r\n                    <ul>\r\n                        {this.state.budgets.map((budget) =>\r\n                        (<li key={budget.id}\r\n                            onClick={() => this.changeSelectedBudget(budget.id)}\r\n                            style={{ cursor: 'pointer' }}\r\n                            className={budget.id == this.state.idSelectedBudget ? 'input-group text-bold' : 'input-group'}\r\n                        >\r\n                            {budget.name}\r\n                        </li>))}\r\n                    </ul>\r\n                    <br />\r\n                    <div>\r\n                        <button className='btn btn-round btn-dark pos-abs mt-neg-20 z-5' onClick={this.openBudgetCreate}>+ Add Budget</button>\r\n                    </div>\r\n                </div>\r\n                <div className='content'>\r\n                    {this.renderBudgetInfo(this.state.budgets.find((budget) => budget.id == this.state.idSelectedBudget))}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className='container wide'>\r\n                {this.renderBudgetCreateModal()}\r\n                {this.renderBudgets()}\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass FieldErrors extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { errors: [] };\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.buildErrorMessages();\r\n  }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.show != prevProps.show) { this.buildErrorMessages(); }\r\n    if (this.props.val != prevProps.val) { this.buildErrorMessages(); }\r\n    if (JSON.stringify(this.props.validations) != JSON.stringify(prevProps.validations)) { this.buildErrorMessages(); }\r\n  }\r\n\r\n  valRequired() {\r\n    const val = this.props.val;\r\n    if (typeof val == 'number') {\r\n      if (val == undefined || val == null || isNaN(parseInt(val.toString()))) { return false; }\r\n    } else if (!val) {\r\n      return false;\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  valGreaterThan() {\r\n    const val = this.props.val;\r\n    if (parseFloat(val.toString()) <= this.props.validations.greaterThan) { return false; }\r\n    return true;\r\n  }\r\n\r\n  buildErrorMessages() {\r\n    const errs = [];\r\n\r\n    if (this.props.validations.required && !this.valRequired()) { errs.push(`${this.props.label} is required`); }\r\n    if (this.props.validations.greaterThan != undefined && !this.valGreaterThan()) { errs.push(`${this.props.label} must be greater than ${this.props.validations.greaterThan}`); }\r\n\r\n    this.setState({ errors: errs });\r\n    if (this.props.handleErrors) { this.props.handleErrors(this.props.label, errs); }\r\n  }\r\n\r\n  renderError(e, idx) {\r\n    return <li key={idx}>{e}</li>;\r\n  }\r\n\r\n  render() {\r\n    if (!this.props.show || !this.state.errors.length) { return ''; }\r\n\r\n    return (\r\n      <ul className=\"errors\">\r\n        {this.state.errors.map((e, idx) => this.renderError(e, idx))}\r\n      </ul>\r\n    );\r\n  }\r\n}\r\n\r\nFieldErrors.defaultProps = {\r\n  val: null,\r\n  validations: {},\r\n  show: false,\r\n  handleErrors: null,\r\n  label: '',\r\n};\r\n\r\nFieldErrors.propTypes = {\r\n  val: PropTypes.any,\r\n  validations: PropTypes.object,\r\n  show: PropTypes.bool,\r\n  handleErrors: PropTypes.func,\r\n  label: PropTypes.string,\r\n};\r\n\r\nexport default FieldErrors;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Modal extends React.Component {\r\n  componentDidMount() {\r\n    document.body.className += ' modal-open';\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const openModals = document.querySelectorAll('.modal').length;\r\n    if (openModals == 1) {\r\n      document.body.className = document.body.className.replace('modal-open', '');\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"modal-mask modal\">\r\n        <div className=\"modal-wrapper\">\r\n          <div className=\"modal-container\">\r\n            <div className=\"modal-header\">\r\n              <h3>{this.props.title}</h3>\r\n\r\n              <a className=\"close\" onClick={this.props.onClose}>\r\n                <i className=\"fa fa-times\" />\r\n              </a>\r\n            </div>\r\n\r\n            <div className=\"modal-body\">\r\n              {this.props.children}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nModal.defaultProps = {\r\n  title: '',\r\n};\r\n\r\nModal.propTypes = {\r\n  title: PropTypes.string,\r\n  onClose: PropTypes.func.isRequired,\r\n  children: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Modal;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport BudgetMain from '../components/budget/Main';\r\n\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n  ReactDOM.render(\r\n    <BudgetMain {...window.InitialProps} />,\r\n    document.getElementById('budget'),\r\n  );\r\n});\r\n"],"mappings":"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AAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AADA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AASA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAIA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AACA;;AAnIA;AACA;AAoIA;AACA;A;;;;;;;;;;;;;;;;;;;;ACzIA;AACA;AACA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAFA;AAGA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAGA;AACA;;AAxDA;AACA;AAyDA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;A;;;;;;;;;;;;;;;;;;;;AC9EA;AACA;AACA;AACA;;;;;;;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;;AAjCA;AACA;AAkCA;AACA;AADA;AAIA;AACA;AACA;AACA;AAHA;AAMA;AACA;A;;;;;;;;;;;;;;;;;ACjDA;AACA;AACA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;A;;;;;;;;;;A","sourceRoot":""}